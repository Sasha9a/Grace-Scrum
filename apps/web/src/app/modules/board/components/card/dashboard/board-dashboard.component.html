<div *ngIf="!loading">
  <div class="flex justify-content-between align-items-center mt-3">
    <h1 class="my-0">{{ board.name }}</h1>
    <div>
      <button pButton *ngIf="authService.currentUser?._id === board.createdUser?._id"
              type="button"
              icon="pi pi-pencil"
              label="Редактировать"
              class="p-button-secondary p-button-text mr-2"
              routerLink="/board/edit/{{ board._id }}">
      </button>
      <button pButton type="button"
              icon="pi pi-times"
              label="Покинуть"
              class="p-button-danger p-button-text"
              (click)="op.toggle($event)">
      </button>
      <p-overlayPanel #op [style]="{ 'width': '450px' }">
        <ng-template pTemplate="">
          <ng-container *ngIf="!loadingLeave">
            <p>Вы действительно хотите покинуть доску?</p>
            <div *ngIf="authService.currentUser?._id === board.createdUser?._id" class="mt-3">
              <p>Так как вы являетесь владельцем доски, выберите пользователя которому передадите свои права</p>
              <grace-single-select [options]="board.users"
                                   [(selectedItem)]="userSelect"
                                   optionLabel="login"
                                   styleClass="mt-2"
                                   filterBy="login"
                                   placeholder="Пользователь">
              </grace-single-select>
            </div>
            <button pButton type="button" icon="pi pi-times" label="Покинуть" class="p-button-danger mt-3" (click)="leaveBoard()"></button>
          </ng-container>
          <grace-spinner *ngIf="loadingLeave"></grace-spinner>
        </ng-template>
      </p-overlayPanel>
    </div>
  </div>

  <div class="flex flex-nowrap overflow-x-auto overflow-y-hidden gap-2 mt-4" style="min-height: 200px;">
    <div *ngFor="let column of board.columns | orderBy: 'order:number'">
      <p class="text-gray-600 text-base mb-2 pl-1">{{ column.name }}</p>
      <div class="h-full bg-gray-50 p-1 xl:w-23rem lg:w-18rem md:w-15rem sm:w-13rem w-13rem drop-column" pDroppable="tasks">
        <p-card header="Simple Card" pDraggable="tasks">
          <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Inventore sed consequuntur error repudiandae numquam deserunt
            quisquam repellat libero asperiores earum nam nobis, culpa ratione quam perferendis esse, cupiditate neque quas!</p>
        </p-card>
      </div>
    </div>
  </div>
</div>

<grace-spinner *ngIf="loading"></grace-spinner>
